/*! slip.js 1.0.2 Copyright 2017 Colin Clark | https://github.com/colinbdclark/slip.js */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.slip={})}(this,function(e){"use strict";function r(e,r,s){return e instanceof ArrayBuffer?new Uint8Array(e,r,s):e}function s(e){var r=new Uint8Array(2*e.length);return r.set(e),r}function t(e,r,s){var t=e.buffer.slice?e.buffer.slice(r,s):e.subarray(r,s);return new Uint8Array(t)}var n=192,i=219,f=220,a=221,o=function(e){e="function"!=typeof e?e||{}:{onMessage:e},this.maxMessageSize=e.maxMessageSize||10485760,this.bufferSize=e.bufferSize||1024,this.msgBuffer=new Uint8Array(this.bufferSize),this.msgBufferIdx=0,this.onMessage=e.onMessage,this.onError=e.onError,this.escape=!1};o.prototype.decode=function(e){var s=this;e=r(e);for(var t,o=0;o<e.length;o++){var u=e[o];if(s.escape)u===a?u=i:u===f&&(u=n);else{if(u===i){s.escape=!0;continue}if(u===n){t=s.handleEnd();continue}}s.addByte(u)||s.handleMessageMaxError()}return t},o.prototype.handleMessageMaxError=function(){this.onError&&this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary."),this.msgBufferIdx=0,this.escape=!1},o.prototype.addByte=function(e){return this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=s(this.msgBuffer)),this.msgBuffer[this.msgBufferIdx++]=e,this.escape=!1,this.msgBuffer.length<this.maxMessageSize},o.prototype.handleEnd=function(){if(0!==this.msgBufferIdx){var e=t(this.msgBuffer,0,this.msgBufferIdx);return this.onMessage&&this.onMessage(e),this.msgBufferIdx=0,e}},e.byteArray=r,e.expandByteArray=s,e.sliceByteArray=t,e.encode=function(e,o){(o=o||{}).bufferPadding=o.bufferPadding||4;var u=(e=r(e,o.offset,o.byteLength)).length+o.bufferPadding+3&-4,h=new Uint8Array(u),g=1;h[0]=n;for(var d=0;d<e.length;d++){g>h.length-3&&(h=s(h));var c=e[d];c===n?(h[g++]=i,c=f):c===i&&(h[g++]=i,c=a),h[g++]=c}return h[g]=n,t(h,0,g+1)},e.Decoder=o,Object.defineProperty(e,"__esModule",{value:!0})});
